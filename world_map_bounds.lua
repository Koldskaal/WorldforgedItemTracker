local WorldMapBounds = {
	[2] = {
		[15] = { left = 18171.0, right = -22569.0, top = 11176.0, bot = -15973.0 },
		[16] = { left = 783.0, right = -2016.0, top = 1500.0, bot = -366.0 },
		[17] = { left = -866.0, right = -4466.0, top = -133.0, bot = -2533.0 },
		[18] = { left = -2079.0, right = -4566.0, top = -5889.0, bot = -7547.0 },
		[20] = { left = -1241.0, right = -4591.0, top = -10566.0, bot = -12800.0 },
		[21] = { left = 3033.0, right = -1485.0, top = 3837.0, bot = 824.0 },
		[22] = { left = 3450.0, right = -750.0, top = 1666.0, bot = -1133.0 },
		[23] = { left = 416.0, right = -3883.0, top = 3366.0, bot = 500.0 },
		[24] = { left = -2287.0, right = -6318.0, top = 3704.0, bot = 1016.0 },
		[25] = { left = 1066.0, right = -2133.0, top = 400.0, bot = -1733.0 },
		[27] = { left = -1575.0, right = -5425.0, top = 1466.0, bot = -1100.0 },
		[28] = { left = 1802.0, right = -3122.0, top = -3877.0, bot = -7160.0 },
		[29] = { left = -322.0, right = -2554.0, top = -6100.0, bot = -7587.0 },
		[30] = { left = -266.0, right = -3195.0, top = -7031.0, bot = -8983.0 },
		[31] = { left = 1535.0, right = -1935.0, top = -7939.0, bot = -10254.0 },
		[33] = { left = -833.0, right = -3333.0, top = -9866.0, bot = -11533.0 },
		[35] = { left = 833.0, right = -1866.0, top = -9716.0, bot = -11516.0 },
		[36] = { left = -1993.0, right = -4752.0, top = -4487.0, bot = -6327.0 },
		[37] = { left = -1570.0, right = -3741.0, top = -8575.0, bot = -10022.0 },
		[38] = { left = 2220.0, right = -4160.0, top = -11168.0, bot = -15422.0 },
		[39] = { left = -2222.0, right = -4516.0, top = -9620.0, bot = -11150.0 },
		[40] = { left = 3016.0, right = -483.0, top = -9400.0, bot = -11733.0 },
		[41] = { left = -389.0, right = -4525.0, top = -2147.0, bot = -4904.0 },
		[302] = { left = 1722.0, right = -14.0, top = -7995.0, bot = -9154.0 },
		[342] = { left = -713.0, right = -1504.0, top = -4569.0, bot = -5096.0 },
		[383] = { left = 873.0, right = -86.0, top = 1877.0, bot = 1237.0 },
		[1202] = { left = -660.0, right = -864.99, top = 2948.83, bot = 2812.16 },
		[1205] = { left = -761.25, right = -1473.75, top = -7325.0, bot = -7800.0 },
		[1206] = { left = -1145.0, right = -1400.0, top = -7480.0, bot = -7650.0 },
		[1207] = { left = -627.48, right = -1387.51, top = -7086.65, bot = -7593.34 },
		[1210] = { left = -2748.75, right = -3311.25, top = -5955.0, bot = -6330.0 },
		[1213] = { left = 2020.0, right = 1800.0, top = 2123.33, bot = 1976.66 },
		[1214] = { left = -1542.99, right = -1917.0, top = -5486.83, bot = -5736.17 },
		[1215] = { left = 245.0, right = -85.0, top = -6020.0, bot = -6240.0 },
		[1216] = { left = 32.75, right = -472.75, top = -5313.0, bot = -5650.0 },
		[1220] = { left = 281.75, right = 41.75, top = -9700.0, bot = -9860.0 },
		[1221] = { left = 289.25, right = 34.25, top = -9710.0, bot = -9880.0 },
		[1222] = { left = -445.875, right = -769.125, top = -8985.0, bot = -9200.5 },
		[1223] = { left = -7180.0, right = -7480.0, top = 7710.0, bot = 7510.0 },
		[1226] = { left = -27.0, right = -306.0, top = -8500.0, bot = -8686.0 },
		[1235] = { left = 1792.5, right = 1342.5, top = -11055.0, bot = -11355.0 },
		[1236] = { left = 2096.25, right = 1833.75, top = -10430.0, bot = -10605.0 },
		[1237] = { left = 1570.5, right = 1293.5, top = -9798.67, bot = -9983.33 },
		[1238] = { left = 187.5, right = -781.25, top = -8570.83, bot = -9216.67 },
		[1239] = { left = 1200.0, right = -66.8, top = -5724.66, bot = -6566.66 },
		[1240] = { left = 2147.92, right = 1058.33, top = 2270.83, bot = 1543.75 },
		[2028] = { left = 266.658, right = -1033.35, top = -7933.33, bot = -8800.0 },
		[2029] = { left = -66.6719, right = -566.668, top = -8500.0, bot = -8833.33 },
	},
	[1] = {
		[5] = { left = -1962.0, right = -7250.0, top = 1808.0, bot = -1716.0 },
		[10] = { left = 2047.0, right = -3089.0, top = -272.0, bot = -3697.0 },
		[12] = { left = 2622.0, right = -7510.0, top = 1612.0, bot = -5143.0 },
		[14] = { left = 17066.0, right = -19733.0, top = 12799.0, bot = -11733.0 },
		[42] = { left = 3814.0, right = -1277.0, top = 11831.0, bot = 8437.0 },
		[43] = { left = 2941.0, right = -3608.0, top = 8333.0, bot = 3966.0 },
		[44] = { left = 1700.0, right = -4066.0, top = 4672.0, bot = 829.0 },
		[62] = { left = -433.0, right = -4833.0, top = -3966.0, bot = -6900.0 },
		[82] = { left = 3245.0, right = -1637.0, top = 2916.0, bot = -339.0 },
		[102] = { left = 4233.0, right = -262.0, top = 452.0, bot = -2545.0 },
		[122] = { left = 5441.0, right = -1508.0, top = -2366.0, bot = -7000.0 },
		[142] = { left = -974.0, right = -6225.0, top = -2033.0, bot = -5533.0 },
		[162] = { left = -218.0, right = -7118.0, top = -5875.0, bot = -10475.0 },
		[182] = { left = -3277.0, right = -8347.0, top = 5341.0, bot = 1960.0 },
		[183] = { left = 1641.0, right = -4108.0, top = 7133.0, bot = 3300.0 },
		[202] = { left = 533.0, right = -3166.0, top = -5966.0, bot = -8433.0 },
		[242] = { left = -1381.0, right = -3689.0, top = 8491.0, bot = 6952.0 },
		[262] = { left = 2537.0, right = -945.0, top = -5958.0, bot = -8281.0 },
		[282] = { left = -316.0, right = -7416.0, top = 8533.0, bot = 3800.0 },
		[322] = { left = -3680.0, right = -5083.0, top = 2273.0, bot = 1338.0 },
		[363] = { left = 516.0, right = -527.0, top = -849.0, bot = -1545.0 },
		[382] = { left = 2938.0, right = 1880.0, top = 10238.0, bot = 9532.0 },
		[1201] = { left = -1902.5, right = -2472.5, top = -490.0, bot = -870.0 },
		[1203] = { left = -3707.5, right = -5013.5, top = -8036.66, bot = -8907.33 },
		[1204] = { left = -4163.74, right = -5271.25, top = -7955.83, bot = -8694.16 },
		[1208] = { left = 3085.5, right = 2485.5, top = -1250.0, bot = -1650.0 },
		[1209] = { left = 3165.01, right = 2604.98, top = -1092.32, bot = -1465.67 },
		[1211] = { left = -12247.5, right = -12722.5, top = -3009.16, bot = -3325.83 },
		[1212] = { left = -11369.0, right = -11744.0, top = -4640.0, bot = -4890.0 },
		[1217] = { left = -4166.5, right = -4432.5, top = 5.5, bot = -171.83 },
		[1218] = { left = -4622.5, right = -4880.5, top = 971.25, bot = 799.25 },
		[1219] = { left = -4629.0, right = -4899.0, top = 1580.5, bot = 1400.5 },
		[1224] = { left = 580.0, right = 229.99, top = -2263.33, bot = -2496.66 },
		[1225] = { left = -818.0, right = -1559.0, top = -1436.0, bot = -1930.0 },
		[1227] = { left = 161.255, right = -91.2549, top = -6183.33, bot = -6351.67 },
		[1228] = { left = -2190.0, right = -2940.0, top = -7640.0, bot = -8140.0 },
		[1229] = { left = -3612.5, right = -4497.5, top = -8900.0, bot = -9490.0 },
		[1230] = { left = 1685.0, right = 1454.99, top = 9881.67, bot = 9728.33 },
		[1231] = { left = 1735.0, right = 1354.99, top = 9931.67, bot = 9678.33 },
		[1232] = { left = 1249.8, right = 970.2, top = 10211.7, bot = 10025.3 },
		[1233] = { left = 1140.0, right = 660.0, top = 11035.0, bot = 10715.0 },
		[1234] = { left = -983.75, right = -1366.25, top = -7930.0, bot = -8185.0 },
		[1243] = { left = 1491.67, right = 41.666, top = 11033.3, bot = 10066.7 },
		[1244] = { left = -3641.67, right = -4991.67, top = 0.0, bot = -900.0 },
		[1245] = { left = 266.54, right = -1533.34, top = -2566.74, bot = -3766.78 },
		[2030] = { left = -4100.0, right = -4650.29, top = 0.0078125, bot = -366.625 },
		[2031] = { left = 581.66, right = 279.15, top = 10745.9, bot = 10545.9 },
	},
}

local GetXY = function(C, Z, x, y)
	local zoneData = WorldMapBounds[C][Z]
	if zoneData then
		local worldX = zoneData.left + (zoneData.right - zoneData.left) * x
		local worldY = zoneData.top + (zoneData.bot - zoneData.top) * y
		return worldX, worldY
	end
	return x, y
end

local function TranslateWorldMapPosition(C, Z, xPos, yPos, nC, nZ)
	if C ~= nC then
		return -1, -1
	end

	local x, y = GetXY(C, Z, xPos, yPos)

	local left, right, top, bot =
		WorldMapBounds[nC][nZ].left,
		WorldMapBounds[nC][nZ].right,
		WorldMapBounds[nC][nZ].top,
		WorldMapBounds[nC][nZ].bot

	local px = (x - left) / (right - left)
	local py = (y - top) / (bot - top)
	-- print("This is all for", y, x, nZ, Z, left, top)

	return px, py
end

function WorldforgedItemTracker:PlaceIconOnWorldMap(worldMapFrame, icon, continent, zone, xPos, yPos)
	local C, Z = GetCurrentMapContinent(), GetCurrentMapAreaID()
	if Z == 15 or Z == 16 then -- no showing on big map
		icon:Hide()
		return
	end
	local nX, nY = TranslateWorldMapPosition(continent, zone, xPos, yPos, C, Z)
	-- anchor and :Show() the icon if it is within the boundry of the current map, :Hide() it otherwise
	if nX and nY and (0 < nX and nX <= 1) and (0 < nY and nY <= 1) then
		icon:ClearAllPoints()
		icon:SetPoint(
			"CENTER",
			worldMapFrame,
			"TOPLEFT",
			nX * worldMapFrame:GetWidth(),
			-nY * worldMapFrame:GetHeight()
		)
		icon:Show()
	else
		icon:Hide()
	end
	return nX, nY
end
